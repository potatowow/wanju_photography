$(document).ready(function () {
    var send_btn = document.querySelector('.send_btn');
    var submit_btn = document.getElementById('submit_btn');

    send_btn.addEventListener('click', function (e) {
        e.preventDefault();

        if ($('#name').val() == '') {
            $('#name').focus();
            alert('請輸入您的姓名!!');
            return false;
        }

        pattern = /^[\u4e00-\u9fa5]{2,4}$/;
        if (!pattern.test($('#name').val())) {
            alert('請輸入正確的中文姓名!!');
            $('#name').focus();
            return false;
        }

        if ($('#cellphone').val() == '') {
            alert('請輸入您的行動電話!!');
            $('#cellphone').focus();
            return false;
        }
        pattern = /^(09)[0-9]{8}$/;
        if (!pattern.test($('#cellphone').val())) {
            alert('請輸入您正確的行動電話!!');
            $('#cellphone').focus();
            return false;
        }
        if ($('#address').val() == '') {
            alert('請輸入您的地址!!');
            $('#address').focus();
            return false;
        }

        if ($('#email').val() == '') {
            alert('請輸入您的Email!!');
            $('#email').focus();
            return false;
        }
        pattern = /^([A-Za-z0-9_\-\.])+\@([A-Za-z0-9_\-\.])+\.([A-Za-z]{2,4})$/;
        if (!pattern.test($('#email').val())) {
            alert('請輸入您正確的Email!!');
            $('#email').focus();
            return false;
        }

        if ($('input:checkbox:checked[name="agree_item"]').val() != '1') {
            alert('請勾選同意個資法條款!!');
            return false;
        }
        submit_btn.click();
        $.blockUI({ message: null });

    });
});

function error_call_back() {
    is_mobile_repeat = this.value.msg.match(/[手機]/i) != null;
    is_email_repeat = this.value.msg.match(/[信箱]/i) != null;
    is_full = this.value.msg.match(/[店家已兌換完畢]/i) != null;
    if (is_mobile_repeat) {
        alert('您已參加過囉!!');
        $.unblockUI();
        return false;
    }
    if (is_email_repeat) {
        alert('此信箱已報名!!');
        $.unblockUI();
        return false;
    }
    if (is_full) {
        alert('櫃點已額滿!!');
        $.unblockUI();
        return false;
    }
    alert('很抱歉，系統資料逾時，請重新操作一次!!');
    // console.log(this.value);
    window.location.reload();
}

function success_call_back() {
    alert('報名成功，請分享活動至Facebook!');
    fb_share()
    $.unblockUI();
}

